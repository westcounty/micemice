# Micemice PRD 实现对照清单（App-only, Offline-first）

- 对照日期：2026-02-07
- 对照文档：`docs/product/Micemice_App_PRD_v1.0.md`
- 范围说明：仅统计 App 端能力；网络后端、独立 Web 后台不计入本清单

## 1. 登录与权限

- [x] 账号登录（账号/密码/组织编码）
- [x] 角色权限（Researcher/PI/Admin，路由+动作权限）
- [x] 会话管理（登录态维护、退出）
- [x] 会话安全（30分钟无操作自动登出）
- [x] 设备与会话管理（当前设备信息、会话状态、手动结束会话）
- [x] 关键写操作审计留痕

## 2. 主数据管理

- [x] 房间/机架/笼位结构（笼位模型含 room/rack/slot）
- [x] 协议基础信息与状态管理
- [x] 品系字典管理（新增/删除/选择）
- [x] 基因型模板字典管理（新增/删除/选择）
- [x] 主数据校验（创建个体/CSV导入严格校验）

## 3. 笼位管理

- [x] 新建笼、转笼、并笼、拆笼
- [x] 笼容量预警与阻断
- [x] 笼卡详情
- [x] 笼卡历史时间线（审计回溯）
- [x] 笼卡页批量更新个体状态
- [x] 扫码进入笼卡（CameraX + MLKit + 手工兜底）
- [x] 管理端笼码二维码生成与导出（PNG）

## 4. 个体管理

- [x] 个体档案（耳号/RFID/条码字段兼容）
- [x] 状态管理（状态机合法跳转校验）
- [x] 关键状态变更合规校验（协议有效性）
- [x] 分型/实验/审计关联视图
- [x] 家系字段（father_id/mother_id）与详情展示
- [x] 个体处理事件（体重/健康/处理）记录与时间线
- [x] 上下游谱系展示（父母 + 直接子代）
- [x] 附件管理（本地文件路径登记）
- [x] 关键状态合规校验（进入繁育/实验需有效协议）

## 5. 繁育管理

- [x] 配种计划创建
- [x] 查栓登记
- [x] 产仔登记（批量生成幼鼠，自动关联父母）
- [x] 断奶完成
- [x] 断奶向导（批量分笼）
- [x] 断奶操作撤销
- [x] 繁育日历（查栓/预产/断奶节点）
- [x] 近交风险提示（创建配种前预警）

## 6. 分型管理

- [x] 采样登记
- [x] 批次管理
- [x] 板位分配（自动孔位映射）
- [x] 结果导入（CSV）
- [x] 分型冲突检测
- [x] 冲突人工确认
- [x] 失败行重试模板

## 7. Cohort / 实验

- [x] cohort 条件筛选与创建
- [x] cohort 锁定快照
- [x] cohort 模板（保存/更新/删除/应用）
- [x] 盲法编码生成
- [x] 盲法 CSV 导出
- [x] 实验创建/事件记录/归档

## 8. 任务与提醒

- [x] 今日待办、逾期筛选、批量完成
- [x] 模板任务（创建/删除/套用）
- [x] 任务批量指派
- [x] 逾期升级规则（24h/48h）
- [x] 通知中心（App 内）
- [x] 本地系统通知（Android Notification）

## 9. 合规与审计

- [x] 协议绑定与到期提醒
- [x] 关键动作阻断/警告（协议无效、状态机非法等）
- [x] 培训资质校验（关键繁育/实验/采样操作）
- [x] 审计日志全流程留痕
- [x] 审计查询过滤
- [x] 合规导出（CSV/PDF/ZIP导出包）

## 10. 报表与导出

- [x] 笼位占用率
- [x] 任务完成率
- [x] 繁育成功率
- [x] 存活率
- [x] 成本估算（基础版，USD/天）
- [x] 筛选维度（时间窗/品系/课题关键词）

## 11. 系统能力（App-only）

- [x] 离线可用（本地状态持久化）
- [x] 同步事件队列与失败重试（本地模拟）
- [x] 冲突中心
- [x] 导入/导出本地文件

## 12. 仍可增强（非阻塞）

- [x] 更细粒度 RBAC 权限点配置（角色 + 能力点开关）
- [x] 附件文件选择器与拍照直传
- [x] 更丰富的统计图表可视化
- [x] 审计 before/after 字段结构化存储
