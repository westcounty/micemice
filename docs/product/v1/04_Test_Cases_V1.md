# Micemice V1 测试用例包

- 版本：V1.0
- 日期：2026-02-07

## 1. 测试范围

1. 功能链路：笼位、个体、繁育、分型、cohort、任务、报表。
2. 合规链路：协议校验、审计日志、导出。
3. 离线链路：本地写入、恢复同步、冲突处理。
4. 非功能：性能、稳定性、安全。

## 2. 功能用例

## TC-F-001 登录成功

1. 前置：账号可用。
2. 步骤：输入账号密码登录。
3. 预期：进入工作台，显示用户角色信息。

## TC-F-002 权限隔离

1. 前置：博士生角色无管理权限。
2. 步骤：登录后访问管理中心。
3. 预期：入口不可见或访问被拒。

## TC-F-003 扫码进笼卡

1. 前置：存在有效笼码。
2. 步骤：扫码。
3. 预期：2秒内进入对应笼卡。

## TC-F-004 转笼成功

1. 前置：目标笼有空位。
2. 步骤：在笼卡执行转笼。
3. 预期：个体位置更新，事件写入时间线。

## TC-F-005 超容量预警

1. 前置：目标笼容量已满。
2. 步骤：尝试转入新个体。
3. 预期：阻断或强提醒，符合配置。

## TC-F-006 配种创建任务

1. 前置：一雄一雌可用。
2. 步骤：配种向导提交。
3. 预期：创建配种记录并生成后续任务。

## TC-F-007 断奶批量分笼

1. 前置：存在待断奶幼鼠。
2. 步骤：批量分配目标笼并提交。
3. 预期：所有幼鼠状态与笼位同步更新。

## TC-F-008 分型结果导入

1. 前置：存在采样批次。
2. 步骤：导入结果CSV。
3. 预期：合法项成功，冲突项进入待确认。

## TC-F-009 cohort 锁定

1. 前置：筛选出候选个体。
2. 步骤：创建并锁定cohort。
3. 预期：保存筛选条件快照与入组名单。

## TC-F-010 任务完成

1. 前置：存在今日待办。
2. 步骤：任务标记完成。
3. 预期：状态变更、完成时间记录、审计写入。

## 3. 合规用例

## TC-C-001 协议过期阻断

1. 前置：协议已过期。
2. 步骤：提交配种。
3. 预期：请求被阻断并提示续期。

## TC-C-002 审计完整性

1. 前置：执行一次转笼。
2. 步骤：查询审计日志。
3. 预期：包含before/after和操作者。

## TC-C-003 合规导出

1. 前置：指定周期内有关键操作。
2. 步骤：导出检查包。
3. 预期：包含任务、事件、协议关联和审计信息。

## 4. 离线与同步用例

## TC-O-001 离线新建记录

1. 前置：断网。
2. 步骤：新建采样记录。
3. 预期：本地保存成功，状态为待同步。

## TC-O-002 网络恢复同步

1. 前置：存在待同步事件。
2. 步骤：恢复网络。
3. 预期：自动上送并标记成功。

## TC-O-003 冲突处理

1. 前置：同字段服务端已更新。
2. 步骤：提交本地旧版本改动。
3. 预期：进入冲突中心待人工确认。

## 5. 性能与稳定性

## TC-P-001 列表性能

1. 目标：笼位列表首屏 p95 < 1.5秒。

## TC-P-002 扫码性能

1. 目标：扫码到笼卡 p95 < 2秒。

## TC-P-003 崩溃率

1. 目标：Beta阶段崩溃率 < 0.5%。

## 6. 安全测试

## TC-S-001 Token失效

1. 步骤：使用过期token请求。
2. 预期：返回401并触发刷新流程。

## TC-S-002 越权访问

1. 步骤：低权限角色访问管理接口。
2. 预期：返回403。

## TC-S-003 敏感日志脱敏

1. 步骤：查看客户端日志。
2. 预期：不输出密码等敏感信息。

## 7. 回归清单

1. 登录与权限
2. 扫码与笼卡
3. 繁育主链路
4. 分型回填
5. cohort 锁定
6. 任务提醒
7. 报表导出
8. 审计日志

## 8. 验收门槛

1. P0用例通过率 100%。
2. P1用例通过率 >= 95%。
3. 无阻断级缺陷（Sev1）。
4. 高危合规缺陷为 0。
